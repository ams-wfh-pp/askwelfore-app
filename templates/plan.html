<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AskWelFore | Your Flav.UR.Way Wellness Reset</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; 
            padding: 20px; 
        }
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 16px; 
            padding: 40px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); 
        }
        .award-banner { text-align: center; margin-bottom: 25px; }
        .award-banner img { max-width: 220px; filter: drop-shadow(0 3px 8px rgba(0,0,0,0.2)); }
        .award-caption { font-size: 0.95rem; color: #4a5568; font-weight: 600; margin-top: 8px; }
        
        .intro { text-align: center; margin-bottom: 20px; }
        .intro h1 { color: #2d3748; font-size: 1.8rem; margin-bottom: 10px; }
        .intro p { color: #4a5568; line-height: 1.6; max-width: 750px; margin: 0 auto; }
        
        .step-counter { 
            text-align: center; 
            color: #667eea; 
            font-weight: 600; 
            font-size: 0.95rem; 
            margin-bottom: 10px; 
        }
        
        .progress-footer {
            text-align: center;
            color: #667eea;
            font-size: 0.9rem;
            margin-top: 8px;
            font-style: italic;
        }
        
        .progress-bar { width: 100%; height: 8px; background: rgba(102,126,234,0.15); border-radius: 4px; margin: 25px 0; }
        .progress { height: 100%; background: linear-gradient(135deg,#667eea,#764ba2); border-radius: 4px; width: 0%; transition: width 0.4s ease; }
        
        fieldset { 
            display: none; 
            border: none; 
            margin: 20px 0; 
            animation: fadeIn 0.5s ease;
        }
        fieldset.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        legend { 
            color: #2d3748; 
            font-size: 1.5rem; 
            font-weight: 600; 
            margin-bottom: 12px; 
            width: 100%;
        }
        
        .fieldset-description {
            color: #4a5568;
            margin-bottom: 20px;
            line-height: 1.7;
            font-size: 1.05rem;
        }
        
        .encouragement-footer {
            background: #f0f4ff;
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 20px;
            color: #5a67d8;
            font-style: italic;
            font-size: 0.95rem;
            border-left: 3px solid #667eea;
        }
        
        label { 
            display: block; 
            color: #4a5568; 
            margin-bottom: 8px; 
            font-weight: 500; 
        }
        
        input[type="text"], 
        input[type="email"], 
        input[type="number"], 
        select, 
        textarea { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #e2e8f0; 
            border-radius: 8px; 
            font-size: 1rem; 
            margin-bottom: 15px; 
            transition: border-color 0.3s;
            font-family: inherit;
        }
        input:focus, select:focus, textarea:focus { 
            outline: none; 
            border-color: #667eea; 
        }
        
        .checkbox-label { 
            display: block; 
            margin-bottom: 12px; 
            cursor: pointer; 
            color: #4a5568;
            padding: 8px 0;
            transition: color 0.2s;
        }
        .checkbox-label:hover { color: #2d3748; }
        .checkbox-label input { margin-right: 8px; cursor: pointer; }
        .checkbox-sublabel {
            font-size: 0.85rem;
            color: #718096;
            margin-left: 24px;
            font-style: italic;
        }
        
        .color-group {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }
        .color-group.red { border-color: #fc8181; }
        .color-group.orange { border-color: #f6ad55; }
        .color-group.yellow { border-color: #f6e05e; }
        .color-group.green { border-color: #68d391; }
        .color-group.purple { border-color: #b794f4; }
        .color-group.white { border-color: #cbd5e0; }
        
        .color-group h4 {
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        
        .color-count {
            text-align: center;
            padding: 12px;
            background: #e6fffa;
            border-radius: 8px;
            color: #234e52;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .cuisine-table { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 20px; 
            margin: 20px 0; 
        }
        .cuisine-column h4 { 
            color: #667eea; 
            margin-bottom: 12px; 
            font-size: 1.1rem; 
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 8px;
        }
        
        .dietary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        button { 
            background: linear-gradient(135deg, #667eea, #764ba2); 
            color: white; 
            border: none; 
            padding: 14px 32px; 
            border-radius: 8px; 
            font-size: 1.05rem; 
            font-weight: 600; 
            cursor: pointer; 
            transition: transform 0.2s, box-shadow 0.2s; 
            flex: 1;
        }
        button:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 10px 25px rgba(102,126,234,0.4); 
        }
        button.back-btn {
            background: #e2e8f0;
            color: #4a5568;
        }
        button.back-btn:hover {
            background: #cbd5e0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .plan-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .plan-option {
            border: 3px solid #e2e8f0;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .plan-option:hover {
            border-color: #667eea;
            background: #f7fafc;
            transform: translateY(-2px);
        }
        .plan-option input[type="radio"] {
            margin-bottom: 12px;
            cursor: pointer;
        }
        .plan-option .plan-title {
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        .plan-option .plan-price {
            color: #667eea;
            font-size: 1.3rem;
            font-weight: 700;
        }
        
        .trust-ribbon {
            text-align: center;
            font-size: 0.85em;
            color: #4a5568;
            font-style: italic;
            margin-top: 30px;
            opacity: 0.9;
            transition: opacity 0.3s ease;
        }
        .trust-ribbon:hover {
            opacity: 1;
            color: #2d3748;
        }
        
        .conditional-field {
            display: none;
            margin-left: 20px;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            margin-top: 10px;
        }
        .conditional-field.show {
            display: block;
        }
    </style>
</head>
<body>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const params = new URLSearchParams(window.location.search);
            const nameField = document.getElementById('name');
            const emailField = document.getElementById('email');
            const phoneField = document.getElementById('phone');
            
            if (params.get('first_name') && nameField) {
                nameField.value = params.get('first_name');
            }
            if (params.get('email') && emailField) {
                emailField.value = params.get('email');
            }
            if (params.get('phone') && phoneField) {
                phoneField.value = params.get('phone');
            }
        });
    </script>
    
    <div class="container">
        <div class="award-banner">
            <img src="/static/WELFORE.png" alt="Digital Health Hub Rising Star Finalist 2025 - WelFore Health">
            <p class="award-caption">üèÜ Recognized Globally for Innovation in Wellness & Prevention</p>
        </div>

        <div class="intro">
            <h1>Welcome to Your Flav.UR.Way Wellness Reset</h1>
            <p>Let's personalize your Flavor-First, Family-Centered path to better health. Every answer helps us design something that's authentically you.</p>
        </div>

        <div class="step-counter" id="stepCounter">Step 1 of 6</div>
        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>
        <div class="progress-footer">You're building your Flavor-First Wellness Blueprint!</div>

        <form id="quizForm" method="POST" action="/submit">
            <!-- Step 1: Tell Us About You -->
            <fieldset data-step="1" class="active">
                <legend>üëã Let's Get to Know You</legend>
                <div class="fieldset-description">
                    We believe wellness starts with understanding you ‚Äî your family, your lifestyle, and your goals. Tell us a little about who's around your table and how you live day to day. Every answer helps us tailor a plan that fits your real life, not someone else's.
                </div>
                
                <label for="name">Your Name *</label>
                <input type="text" id="name" name="name" placeholder="Enter your name" required>
                
                <label for="email">Your Email *</label>
                <input type="email" id="email" name="email" placeholder="your@email.com" required>
                
                <label for="age">Your Age *</label>
                <input type="number" id="age" name="age" class="form-control"
       value="{{ request.query_params.get('age', '') }}"
       placeholder="Age" required min="18" max="99">

                
                <label for="gender">Gender *</label>
                <select id="gender" name="gender" required>
                    <option value="">Select...</option>
                    <option value="female">Female</option>
                    <option value="male">Male</option>
                    <option value="non-binary">Non-Binary</option>
                    <option value="prefer-not-to-say">Prefer Not to Say</option>
                </select>
                
                <label for="who_eat_with">Who do you usually cook or eat with? *</label>
                <select id="who_eat_with" name="who_eat_with" required>
                    <option value="">Select...</option>
                    <option value="myself">Myself only</option>
                    <option value="partner">Partner or spouse</option>
                    <option value="family">Kids or family</option>
                    <option value="roommates">Roommates or friends</option>
                </select>
                
                <label for="family_size">How many people in your household?</label>
                <input type="number" id="family_size" name="family_size" placeholder="Number of people" min="1" max="20">
                
                <div id="breastfeedingField" class="conditional-field">
                    <label class="checkbox-label">
                        <input type="checkbox" name="special_conditions" value="breastfeeding">
                        Currently breastfeeding
                    </label>
                </div>
                
                <div class="button-group">
                    <button type="button" class="next-btn" onclick="nextStep()">Next</button>
                </div>
                
                <div class="trust-ribbon">
                    üèÖ Backed by 10+ years of research and real-world results ‚Äî including an ADA-funded clinical study with Eastern Virginia Medical School.
                </div>
            </fieldset>

            <!-- Step 2: Rainbow Food Preferences -->
            <fieldset data-step="2">
                <legend>üåà What Colors Brighten Your Plate?</legend>
                <div class="fieldset-description">
                    Eating the rainbow means celebrating variety ‚Äî the reds, greens, oranges, and purples that fuel your body and your joy. Choose the fruits and veggies you love most from each color group. If something's missing, tell us! We'll weave your favorites into your flavor plan.
                </div>
                
                <div class="color-count" id="colorCount">Selected 0 colors</div>
                
                <!-- Red Foods -->
                <div class="color-group red">
                    <h4>üî¥ Red Foods</h4>
                    <label class="checkbox-label"><input type="checkbox" name="red_foods" value="tomatoes"> Tomatoes</label>
                    <label class="checkbox-label"><input type="checkbox" name="red_foods" value="strawberries"> Strawberries</label>
                    <label class="checkbox-label"><input type="checkbox" name="red_foods" value="red_peppers"> Red Bell Peppers</label>
                    <label class="checkbox-label"><input type="checkbox" name="red_foods" value="beets"> Beets</label>
                    <label class="checkbox-label"><input type="checkbox" name="red_foods" value="watermelon"> Watermelon</label>
                    <input type="text" name="red_foods_other" placeholder="Other red favorites (comma-separated)">
                </div>
                
                <!-- Orange Foods -->
                <div class="color-group orange">
                    <h4>üü† Orange Foods</h4>
                    <label class="checkbox-label"><input type="checkbox" name="orange_foods" value="carrots"> Carrots</label>
                    <label class="checkbox-label"><input type="checkbox" name="orange_foods" value="sweet_potatoes"> Sweet Potatoes</label>
                    <label class="checkbox-label"><input type="checkbox" name="orange_foods" value="oranges"> Oranges</label>
                    <label class="checkbox-label"><input type="checkbox" name="orange_foods" value="butternut_squash"> Butternut Squash</label>
                    <label class="checkbox-label"><input type="checkbox" name="orange_foods" value="papaya"> Papaya</label>
                    <input type="text" name="orange_foods_other" placeholder="Other orange favorites (comma-separated)">
                </div>
                
                <!-- Yellow Foods -->
                <div class="color-group yellow">
                    <h4>üü° Yellow Foods</h4>
                    <label class="checkbox-label"><input type="checkbox" name="yellow_foods" value="bananas"> Bananas</label>
                    <label class="checkbox-label"><input type="checkbox" name="yellow_foods" value="corn"> Corn</label>
                    <label class="checkbox-label"><input type="checkbox" name="yellow_foods" value="yellow_squash"> Yellow Squash</label>
                    <label class="checkbox-label"><input type="checkbox" name="yellow_foods" value="pineapple"> Pineapple</label>
                    <label class="checkbox-label"><input type="checkbox" name="yellow_foods" value="lemons"> Lemons</label>
                    <input type="text" name="yellow_foods_other" placeholder="Other yellow favorites (comma-separated)">
                </div>
                
                <!-- Green Foods -->
                <div class="color-group green">
                    <h4>üü¢ Green Foods</h4>
                    <label class="checkbox-label"><input type="checkbox" name="green_foods" value="spinach"> Spinach</label>
                    <label class="checkbox-label"><input type="checkbox" name="green_foods" value="broccoli"> Broccoli</label>
                    <label class="checkbox-label"><input type="checkbox" name="green_foods" value="avocados"> Avocados</label>
                    <label class="checkbox-label"><input type="checkbox" name="green_foods" value="kale"> Kale</label>
                    <label class="checkbox-label"><input type="checkbox" name="green_foods" value="green_beans"> Green Beans</label>
                    <input type="text" name="green_foods_other" placeholder="Other green favorites (comma-separated)">
                </div>
                
                <!-- Blue/Purple Foods -->
                <div class="color-group purple">
                    <h4>üü£ Blue/Purple Foods</h4>
                    <label class="checkbox-label"><input type="checkbox" name="purple_foods" value="blueberries"> Blueberries</label>
                    <label class="checkbox-label"><input type="checkbox" name="purple_foods" value="eggplant"> Eggplant</label>
                    <label class="checkbox-label"><input type="checkbox" name="purple_foods" value="purple_cabbage"> Purple Cabbage</label>
                    <label class="checkbox-label"><input type="checkbox" name="purple_foods" value="blackberries"> Blackberries</label>
                    <label class="checkbox-label"><input type="checkbox" name="purple_foods" value="plums"> Plums</label>
                    <input type="text" name="purple_foods_other" placeholder="Other blue/purple favorites (comma-separated)">
                </div>
                
                <!-- White Foods -->
                <div class="color-group white">
                    <h4>‚ö™ White Foods</h4>
                    <label class="checkbox-label"><input type="checkbox" name="white_foods" value="cauliflower"> Cauliflower</label>
                    <label class="checkbox-label"><input type="checkbox" name="white_foods" value="onions"> Onions</label>
                    <label class="checkbox-label"><input type="checkbox" name="white_foods" value="garlic"> Garlic</label>
                    <label class="checkbox-label"><input type="checkbox" name="white_foods" value="mushrooms"> Mushrooms</label>
                    <label class="checkbox-label"><input type="checkbox" name="white_foods" value="turnips"> Turnips</label>
                    <input type="text" name="white_foods_other" placeholder="Other white favorites (comma-separated)">
                </div>
                
                <div class="encouragement-footer">
                    Aim for all six colors daily ‚Äî each one adds its own nutrients and healing power!
                </div>
                
                <div class="button-group">
                    <button type="button" class="back-btn" onclick="previousStep()">Back</button>
                    <button type="button" class="next-btn" onclick="nextStep()">Next</button>
                </div>
                
                <div class="trust-ribbon">
                    üî¨ Clinically evaluated & trusted by 500,000+ families.
                </div>
            </fieldset>

            <!-- Step 3: Health Goals & Dietary Preferences -->
            <fieldset data-step="3">
                <legend>üí™ What Does "Feeling Your Best" Mean to You?</legend>
                <div class="fieldset-description">
                    Wellness looks different for everyone. Some want more energy, others need balance or recovery. Select the health goals that matter most to you, and we'll build your plan around them ‚Äî whether it's supporting your heart, balancing blood sugar, or keeping your glow strong.
                </div>
                
                <label for="health_goal">Your Primary Health Goal *</label>
                <select id="health_goal" name="health_goal" required>
                    <option value="">Select Your Goal</option>
                    <option value="weight_loss">Weight Management</option>
                    <option value="blood_pressure">Lower Blood Pressure</option>
                    <option value="blood_sugar">Stabilize Blood Sugar</option>
                    <option value="energy">Increase Energy</option>
                    <option value="digestive">Improve Gut Health</option>
                    <option value="heart_health">Heart Health ‚Äî Lower sodium, more fiber, healthy fats</option>
                    <option value="diabetes_prevention">Diabetes Prevention</option>
                </select>
                <small style="display: block; color: #718096; font-size: 0.85rem; margin-top: 5px; font-style: italic;">Choose the goal that best fits your current focus ‚Äî you can update it anytime.</small>
                
                <label>Any Dietary Restrictions? (select all that apply)</label>
                <div class="dietary-grid">
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="gluten-free"> Gluten-Free</label>
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="dairy-free"> Dairy-Free</label>
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="nut-free"> Nut-Free</label>
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="shellfish-free"> Shellfish-Free</label>
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="vegetarian"> Vegetarian</label>
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="vegan"> Vegan</label>
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="halal"> Halal</label>
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="kosher"> Kosher</label>
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="fasting"> Fasting (intermittent/religious)</label>
                    <label class="checkbox-label"><input type="checkbox" name="dietary_restrictions" value="other" id="dietOther"> Other</label>
                </div>
                <input type="text" id="dietOtherText" name="dietary_restrictions_other" placeholder="Please specify other restrictions..." style="display: none;">
                
                <label class="checkbox-label">
                    <input type="checkbox" name="special_conditions" value="glp1"> Currently on GLP-1 medications (Ozempic, Wegovy, etc.)
                    <div class="checkbox-sublabel">If you're on Ozempic or Mounjaro, we tailor portions and protein</div>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="special_conditions" value="bariatric"> Post-bariatric surgery
                </label>
                
                <label for="feel_best">What does feeling your best look like to you? (optional)</label>
                <textarea id="feel_best" name="feel_best" rows="2" placeholder="Share your vision of wellness..."></textarea>
                
                <div class="encouragement-footer">
                    Your goals guide your plate ‚Äî every bite should move you closer to feeling amazing.
                </div>
                
                <div class="button-group">
                    <button type="button" class="back-btn" onclick="previousStep()">Back</button>
                    <button type="button" class="next-btn" onclick="nextStep()">Next</button>
                </div>
                
                <div class="trust-ribbon">
                    üèÖ Backed by 10+ years of research and real-world results.
                </div>
            </fieldset>

            <!-- Step 4: Cuisines & Cultural Comforts -->
            <fieldset data-step="4">
                <legend>üçΩÔ∏è Cuisines & Cultural Comforts</legend>
                <div class="fieldset-description">
                    Every region has its own flavor story ‚Äî from Louisiana spice to Pacific fusion, West African stews to Mediterranean comfort. Select all the cuisines that make you feel at home, reflect your roots, or spark your curiosity. üåç
                </div>

                <div class="cuisine-table">
                    <!-- American Regional Traditions -->
                    <div class="cuisine-column">
                        <h4>American Regional Traditions üá∫üá∏</h4>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="New England & Northeast"> New England & Northeast ‚Äì Seafood, chowders, maple, cranberries</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Mid-Atlantic"> Mid-Atlantic ‚Äì Deli culture, bagels, crab boils</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Southern & Soul Food"> Southern & Soul Food ‚Äì Fried chicken, greens, cornbread</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Creole / Cajun / Gulf Coast"> Creole / Cajun / Gulf Coast ‚Äì Gumbo, √©touff√©e</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Midwestern Comforts"> Midwestern Comforts ‚Äì BBQ, casseroles, pierogi</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Tex-Mex & Southwest"> Tex-Mex & Southwest ‚Äì Tacos, chili, grilled peppers</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="California Fresh & Coastal Fusion"> California Fresh & Coastal Fusion ‚Äì Avocado, citrus, Pacific Rim</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Pacific Northwest"> Pacific Northwest ‚Äì Salmon, coffee culture, farm-to-table</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Hawaiian & Polynesian"> Hawaiian & Polynesian ‚Äì Poke, pineapple, island BBQ</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Alaska Native & Arctic"> Alaska Native & Arctic ‚Äì Salmon, seal, berries</label>
                    </div>

                    <!-- Indigenous & Native Traditions -->
                    <div class="cuisine-column">
                        <h4>Indigenous & Native Traditions ü™∂</h4>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Native American"> Native American (Cherokee, Navajo, Pueblo, Sioux)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Alaska Native"> Alaska Native (Inuit, Yup'ik, Aleut, Tlingit)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Native Hawaiian"> Native Hawaiian</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Pacific Islander"> Pacific Islander (Samoan, Tongan, Fijian, Micronesian)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Aboriginal Australian / Torres Strait Islander"> Aboriginal Australian / Torres Strait Islander</label>
                    </div>

                    <!-- African Diaspora -->
                    <div class="cuisine-column">
                        <h4>African Diaspora üåç</h4>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="African American / Gullah Geechee"> African American / Gullah Geechee</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="West African"> West African (Nigeria, Ghana, Senegal)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="East African"> East African (Ethiopia, Kenya, Tanzania)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="North African"> North African (Morocco, Tunisia, Egypt)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Southern African"> Southern African (South Africa, Zimbabwe, Botswana)</label>
                    </div>

                    <!-- Caribbean -->
                    <div class="cuisine-column">
                        <h4>Caribbean üèùÔ∏è</h4>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Jamaican"> Jamaican</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Trinidad & Tobago"> Trinidad & Tobago</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Haitian"> Haitian</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Cuban"> Cuban</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Puerto Rican"> Puerto Rican</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Dominican"> Dominican</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="U.S. Virgin Islands"> U.S. Virgin Islands üáªüáÆ</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Other Caribbean"> Other Caribbean</label>
                    </div>

                    <!-- Latin American -->
                    <div class="cuisine-column">
                        <h4>Latin American üåÆ</h4>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Mexican"> Mexican</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Central American"> Central American (Guatemala, El Salvador, Honduras)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="South American"> South American (Peru, Brazil, Chile, Argentina)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="U.S. Latinx Fusion"> U.S. Latinx Fusion (Cali-Mex, Southwest)</label>
                    </div>

                    <!-- Asian & Middle Eastern -->
                    <div class="cuisine-column">
                        <h4>Asian & Middle Eastern üçú</h4>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="South Asian"> South Asian (India, Pakistan, Sri Lanka, Bangladesh)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="East Asian"> East Asian (China, Japan, Korea)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Southeast Asian"> Southeast Asian (Thailand, Vietnam, Philippines, Indonesia)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Central Asian"> Central Asian (Uzbek, Kazakh, Mongolian)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Middle Eastern"> Middle Eastern (Lebanon, Iran, Turkey, Palestine, Israel)</label>
                    </div>

                    <!-- European & Mediterranean -->
                    <div class="cuisine-column">
                        <h4>European & Mediterranean üßÄ</h4>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Italian"> Italian</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Greek"> Greek</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="French"> French</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Spanish / Tapas"> Spanish / Tapas</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Portuguese"> Portuguese</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Mediterranean"> Mediterranean (Mixed Regions)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Eastern European"> Eastern European (Polish, Ukrainian, Hungarian)</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="British / Irish"> British / Irish</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Nordic"> Nordic (Scandinavian)</label>
                    </div>

                    <!-- Fusion / Other -->
                    <div class="cuisine-column">
                        <h4>Fusion / Other üåÄ</h4>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Modern Global Fusion"> Modern Global Fusion</label>
                        <label class="checkbox-label"><input type="checkbox" name="cuisines" value="Plant-Based World Cuisine"> Plant-Based World Cuisine</label>
                        <label class="checkbox-label"><input type="checkbox" id="otherCuisineCheck" name="cuisines" value="Other"> Other (please specify)</label>
                        <input type="text" id="otherCuisineText" name="cuisines_other" placeholder="Enter other cuisines or regional dishes..." style="display:none; margin-top:10px; width:100%; padding:8px; border:1px solid #ccc; border-radius:6px;">
                    </div>
                </div>

                <p style="color: #4a5568; font-style: italic; margin: 15px 0; font-size: 0.95rem;">
                    <em>Your region and culture tell your flavor story ‚Äî we'll use them to make healthy taste like home.</em>
                </p>
                
                <label for="flavor_story">Share a story about a dish that means something to you (optional)</label>
                <textarea id="flavor_story" name="flavor_story" rows="3" placeholder="The comfort food you crave, the celebration meal that brings everyone together, or the flavor that makes you smile..."></textarea>
                
                <label for="reinvent_dish">If you could reinvent a favorite family dish to be lighter or salt-free, which one would it be? (optional)</label>
                <input type="text" id="reinvent_dish" name="reinvent_dish" placeholder="e.g., Grandma's fried chicken, mac and cheese...">
                
                <div class="encouragement-footer">
                    Your culture isn't a restriction ‚Äî it's the flavor foundation of your wellness journey.
                </div>
                
                <div class="button-group">
                    <button type="button" class="back-btn" onclick="previousStep()">Back</button>
                    <button type="button" class="next-btn" onclick="nextStep()">Next</button>
                </div>
                
                <div class="trust-ribbon">
                    üî¨ Clinically evaluated & trusted by 500,000+ families.
                </div>
            </fieldset>

            <!-- Step 5: Lifestyle & Habits -->
            <fieldset data-step="5">
                <legend>üè° Let's Make It Work for Your Life</legend>
                <div class="fieldset-description">
                    Healthy living isn't one-size-fits-all ‚Äî it's about meeting you where you are. Tell us how you move, cook, shop, and manage your day. We'll design a realistic plan that fits your time, budget, and kitchen setup ‚Äî because flavor and balance should never depend on perfect conditions.
                </div>
                
                <label for="activity_level">What does a typical weekday look like for you? *</label>
                <select id="activity_level" name="activity_level" required>
                    <option value="">Select...</option>
                    <option value="sedentary">üßçüèΩ Sedentary ‚Äî Mostly sitting or desk work</option>
                    <option value="lightly_active">üèÉüèæ Lightly Active ‚Äî Light exercise 1-3 days/week or active around the house</option>
                    <option value="moderately_active">üßòüèΩ Moderately Active ‚Äî Exercise 3-5 days/week, regular movement</option>
                    <option value="very_active">üèãüèø Very Active ‚Äî Daily intense workouts or physical labor</option>
                </select>
                
                <label for="energy_levels">How would you describe your energy levels most days?</label>
                <select id="energy_levels" name="energy_levels">
                    <option value="">Select...</option>
                    <option value="low">üò¥ Low</option>
                    <option value="okay">‚öñÔ∏è Okay</option>
                    <option value="high">‚ö° High</option>
                </select>
                
                <label for="snacking">How often do you snack between meals?</label>
                <select id="snacking" name="snacking">
                    <option value="">Select...</option>
                    <option value="rarely">Rarely (I'm good until meals)</option>
                    <option value="occasionally">Occasionally (1-2 times/day)</option>
                    <option value="frequently">Frequently (3+ times/day)</option>
                    <option value="constant">Constant grazer üòÑ</option>
                </select>
                
                <label>Which tools do you have at home? (select all that apply)</label>
                <div class="dietary-grid">
                    <label class="checkbox-label"><input type="checkbox" name="kitchen_tools" value="stove"> Stove</label>
                    <label class="checkbox-label"><input type="checkbox" name="kitchen_tools" value="oven"> Oven</label>
                    <label class="checkbox-label"><input type="checkbox" name="kitchen_tools" value="microwave"> Microwave</label>
                    <label class="checkbox-label"><input type="checkbox" name="kitchen_tools" value="air_fryer"> Air Fryer</label>
                    <label class="checkbox-label"><input type="checkbox" name="kitchen_tools" value="blender"> Blender / Food Processor</label>
                    <label class="checkbox-label"><input type="checkbox" name="kitchen_tools" value="fridge"> Refrigerator / Freezer</label>
                </div>
                
                <label for="food_access">How often do you have access to fresh produce or groceries? *</label>
                <select id="food_access" name="food_access" required>
                    <option value="">Select...</option>
                    <option value="always">Always ‚Äî I live near stores/farmers markets</option>
                    <option value="sometimes">Sometimes ‚Äî limited selection nearby</option>
                    <option value="rarely">Rarely ‚Äî it's hard to find or afford fresh foods</option>
                </select>
                
                <label for="food_budget">What's your typical weekly food budget? *</label>
                <select id="food_budget" name="food_budget" required>
                    <option value="">Select...</option>
                    <option value="under_50">&lt;$50 /week</option>
                    <option value="50_100">$50-100</option>
                    <option value="100_150">$100-150</option>
                    <option value="over_150">$150+</option>
                </select>
                
                <label for="meals_per_day">How many meals do you usually eat each day? *</label>
                <select id="meals_per_day" name="meals_per_day" required>
                    <option value="">Select...</option>
                    <option value="1">1 Meal</option>
                    <option value="2">2 Meals</option>
                    <option value="3">3 Meals</option>
                    <option value="4">4+ Meals</option>
                </select>
                
                <label for="cooking_time">Time Available for Cooking?</label>
                <select id="cooking_time" name="cooking_time">
                    <option value="">Select...</option>
                    <option value="under_15">Under 15 minutes</option>
                    <option value="15_30">15-30 minutes</option>
                    <option value="30_60">30-60 minutes</option>
                    <option value="over_60">Over 60 minutes</option>
                </select>
                
                <label for="challenges">What's your biggest challenge with healthy eating?</label>
                <textarea id="challenges" name="challenges" rows="3" placeholder="e.g., time, taste, cost, variety..."></textarea>
                
                <div class="encouragement-footer">
                    Your plan should flex around your life ‚Äî not the other way around. You're almost there!
                </div>
                
                <div class="button-group">
                    <button type="button" class="back-btn" onclick="previousStep()">Back</button>
                    <button type="button" class="next-btn" onclick="nextStep()">Next</button>
                </div>
                
                <div class="trust-ribbon">
                    üèÖ Backed by 10+ years of research and real-world results.
                </div>
            </fieldset>

            <!-- Step 6: Choose Your Plan -->
            <fieldset data-step="6">
                <legend>üöÄ Personalize Your Flav.UR.Way Wellness Blueprint</legend>
                <div class="fieldset-description">
                    You've customized your wellness journey ‚Äî now let's unlock your plan. Start with a free 3-day taste test or go all in for 7 or 14 days of recipes, shopping lists, and practical flavor coaching.
                </div>
                
                <div class="plan-options">
                    <label class="plan-option">
                        <input type="radio" name="plan_duration" value="3" checked required>
                        <div class="plan-title">üéÅ Free 3-Day Starter Plan</div>
                        <div class="plan-price">FREE</div>
                        <p style="font-size: 0.9rem; color: #718096; margin-top: 8px;">Perfect for trying the Flav.UR.Way!</p>
                    </label>
                    <label class="plan-option">
                        <input type="radio" name="plan_duration" value="7" required>
                        <div class="plan-title">üíö 7-Day Wellness Plan</div>
                        <div class="plan-price">$14.95</div>
                        <p style="font-size: 0.9rem; color: #718096; margin-top: 8px;">Complete menu + grocery list</p>
                    </label>
                    <label class="plan-option">
                        <input type="radio" name="plan_duration" value="14" required>
                        <div class="plan-title">üåü 14-Day Deep Reset</div>
                        <div class="plan-price">$24.95</div>
                        <p style="font-size: 0.9rem; color: #718096; margin-top: 8px;">Full color analysis + bonus guide</p>
                    </label>
                </div>
                
                <div class="encouragement-footer">
                    Great job! You've built something that's as unique as you are. Let's bring your flavor-first reset to life.
                </div>
                
                <div class="button-group">
                    <button type="button" class="back-btn" onclick="previousStep()">Back</button>
                    <button type="submit">See My Personalized Plan üåà</button>
                </div>
                
                <div class="trust-ribbon">
                    üåø Recognized globally for innovation in Wellness & Prevention ‚Äî Digital Health Hub Finalist 2025.
                </div>
            </fieldset>
        </form>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;

        function updateProgress() {
            const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('stepCounter').textContent = `Step ${currentStep} of ${totalSteps}`;
        }

        function showStep(step) {
            document.querySelectorAll('fieldset').forEach(fieldset => {
                fieldset.classList.remove('active');
            });
            const currentFieldset = document.querySelector(`fieldset[data-step="${step}"]`);
            if (currentFieldset) {
                currentFieldset.classList.add('active');
            }
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function nextStep() {
            // Validate Step 3: Primary Health Goal is required
            if (currentStep === 3) {
                const healthGoal = document.getElementById('health_goal');
                if (healthGoal && (!healthGoal.value || healthGoal.value.trim() === '')) {
                    alert('Please select your primary health goal before continuing.');
                    healthGoal.focus();
                    return false;
                }
            }
            
            // Validate Step 5: All required lifestyle fields
            if (currentStep === 5) {
                const requiredFields = [
                    { id: 'activity_level', label: 'Activity Level' },
                    { id: 'food_access', label: 'Fresh Food Access' },
                    { id: 'food_budget', label: 'Weekly Food Budget' },
                    { id: 'meals_per_day', label: 'Meals Per Day' }
                ];
                
                let allValid = true;
                let firstInvalid = null;
                
                // Remove any old validation messages
                document.querySelectorAll('.validation-message').forEach(msg => msg.remove());
                
                requiredFields.forEach(fieldInfo => {
                    const field = document.getElementById(fieldInfo.id);
                    if (field && (!field.value || field.value.trim() === '')) {
                        allValid = false;
                        if (!firstInvalid) firstInvalid = field;
                        
                        // Visual cue
                        field.style.border = '2px solid #ff6b6b';
                        field.setAttribute('aria-invalid', 'true');
                        
                        // Friendly inline message
                        const msg = document.createElement('div');
                        msg.className = 'validation-message';
                        msg.style.color = '#ff6b6b';
                        msg.style.fontSize = '0.9em';
                        msg.style.marginTop = '4px';
                        msg.style.marginBottom = '10px';
                        msg.setAttribute('aria-live', 'assertive');
                        msg.innerText = 'Please complete this field before continuing.';
                        field.insertAdjacentElement('afterend', msg);
                    } else if (field) {
                        // Reset valid appearance
                        field.style.border = '2px solid #e2e8f0';
                        field.removeAttribute('aria-invalid');
                    }
                });
                
                if (!allValid) {
                    alert('Please complete all required lifestyle questions before continuing.');
                    if (firstInvalid) firstInvalid.focus();
                    return false;
                }
            }
            
            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        // Update color count
        function updateColorCount() {
            const colorGroups = ['red_foods', 'orange_foods', 'yellow_foods', 'green_foods', 'purple_foods', 'white_foods'];
            let selectedColors = 0;
            colorGroups.forEach(group => {
                const checkboxes = document.querySelectorAll(`input[name="${group}"]:checked`);
                const otherText = document.querySelector(`input[name="${group}_other"]`)?.value;
                if (checkboxes.length > 0 || (otherText && otherText.trim())) {
                    selectedColors++;
                }
            });
            document.getElementById('colorCount').textContent = `Selected ${selectedColors} colors`;
        }

        // Show/hide breastfeeding field based on gender
        document.getElementById('gender').addEventListener('change', function() {
            const breastfeedingField = document.getElementById('breastfeedingField');
            if (this.value === 'female') {
                breastfeedingField.classList.add('show');
            } else {
                breastfeedingField.classList.remove('show');
            }
        });

        // Show/hide dietary restrictions "Other" text field
        document.getElementById('dietOther').addEventListener('change', function() {
            const otherText = document.getElementById('dietOtherText');
            if (this.checked) {
                otherText.style.display = 'block';
            } else {
                otherText.style.display = 'none';
            }
        });

        // Show/hide cuisine "Other" text field
        const otherCuisineCheck = document.getElementById('otherCuisineCheck');
        const otherCuisineText = document.getElementById('otherCuisineText');
        if (otherCuisineCheck && otherCuisineText) {
            otherCuisineCheck.addEventListener('change', function() {
                otherCuisineText.style.display = this.checked ? 'block' : 'none';
            });
        }

        // Update color count when checkboxes or text fields change
        document.addEventListener('change', function(e) {
            if (e.target.name && (e.target.name.includes('_foods') || e.target.name.includes('_foods_other'))) {
                updateColorCount();
            }
            
            // Clear validation errors when user selects a value
            if (e.target.tagName === 'SELECT' && e.target.value) {
                e.target.style.border = '2px solid #e2e8f0';
                e.target.removeAttribute('aria-invalid');
                const nextSibling = e.target.nextElementSibling;
                if (nextSibling && nextSibling.classList.contains('validation-message')) {
                    nextSibling.remove();
                }
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            showStep(currentStep);
            updateColorCount();
        });
    </script>
</body>
</html>
